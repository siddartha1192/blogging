{% extends 'base.html' %}

{% block title %}TechBlog - Latest Technology News, Finance & Automation{% endblock %}

{% block content %}
<!-- Featured Posts Slider -->
<section class="container mt-4 mb-5 featured-slider">
    <div id="featuredCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
            {% for post in featured_posts %}
            <div class="carousel-item {% if loop.first %}active{% endif %}">
                <div class="row g-0">
                    <div class="col-md-6 featured-content">
                        <span class="post-badge category-{{ post.category.slug }}">{{ post.category.name }}</span>
                        <h2 class="my-3">{{ post.title }}</h2>
                        <p class="mb-4">{{ post.excerpt }}</p>
                        <div class="d-flex align-items-center mb-4">
                            <img src="{{ post.author.avatar }}" alt="{{ post.author.name }}" class="author-avatar me-2">
                            <div>
                                <div>{{ post.author.name }}</div>
                                <small class="text-muted">{{ post.publish_date.strftime('%b %d, %Y') }} Â· {{ post.read_time }} min read</small>
                            </div>
                        </div>
                        <a href="{{ url_for('post', slug=post.slug) }}" class="btn btn-primary">Read Article</a>
                    </div>
                    <div class="col-md-6 d-none d-md-block">
                        <img src="{{ post.featured_image }}" alt="{{ post.title }}" class="carousel-image w-100">
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#featuredCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#featuredCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
        <div class="carousel-indicators">
            {% for post in featured_posts %}
            <button type="button" data-bs-target="#featuredCarousel" data-bs-slide-to="{{ loop.index0 }}" {% if loop.first %}class="active" aria-current="true"{% endif %} aria-label="Slide {{ loop.index }}"></button>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Category Navigation -->
<section class="container mb-5">
    <div class="row">
        {% for category in categories %}
        <div class="col-md-4 mb-4">
            <a href="{{ url_for('category', slug=category.slug) }}" class="text-decoration-none">
                <div class="category-card">
                    <div class="category-card-header category-{{ category.slug }}">
                        {% if category.slug == 'finance' %}
                        <i class="bi bi-graph-up-arrow display-4"></i>
                        {% elif category.slug == 'automation' %}
                        <i class="bi bi-robot display-4"></i>
                        {% elif category.slug == 'tech-news' %}
                        <i class="bi bi-newspaper display-4"></i>
                        {% endif %}
                    </div>
                    <div class="category-card-body">
                        <h3>{{ category.name }}</h3>
                        <p class="text-muted">{{ category.description }}</p>
                    </div>
                </div>
            </a>
        </div>
        {% endfor %}
    </div>
</section>

<!-- Latest Articles -->
<section class="container mb-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>Latest Articles</h2>
        <div class="dropdown">
            <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="categoryFilterDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                Filter by Category
            </button>
            <ul class="dropdown-menu" aria-labelledby="categoryFilterDropdown">
                <li><a class="dropdown-item" href="{{ url_for('home') }}">All Categories</a></li>
                {% for category in categories %}
                <li><a class="dropdown-item" href="{{ url_for('category', slug=category.slug) }}">{{ category.name }}</a></li>
                {% endfor %}
            </ul>
        </div>
    </div>
    
    <div class="row">
        {% for post in latest_posts %}
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="post-card">
                <a href="{{ url_for('post', slug=post.slug) }}" class="text-decoration-none">
                    <img src="{{ post.featured_image }}" alt="{{ post.title }}" class="post-image w-100">
                    <div class="post-content">
                        <span class="post-badge category-{{ post.category.slug }}">{{ post.category.name }}</span>
                        <h3 class="post-title">{{ post.title }}</h3>
                        <p class="post-excerpt">{{ post.excerpt }}</p>
                        <div class="post-meta">
                            <div class="post-author">
                                <img src="{{ post.author.avatar }}" alt="{{ post.author.name }}" class="author-avatar">
                                <span>{{ post.author.name }}</span>
                            </div>
                            <span>{{ post.publish_date.strftime('%b %d, %Y') }}</span>
                        </div>
                    </div>
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
</section>

<!-- Newsletter -->
<section class="container mb-5">
    <div class="newsletter text-center">
        <h2 class="mb-3">Stay Updated with the Latest in Tech</h2>
        <p class="mb-4">Subscribe to our newsletter to receive the freshest tech news, tutorials, and exclusive content right in your inbox.</p>
        <div class="alert-container mb-3"></div>
        <form id="newsletterForm" class="newsletter-form">
            <div class="input-group mb-3">
                <input type="email" class="form-control" placeholder="Enter your email" aria-label="Email" required>
                <button class="btn btn-light" type="submit">Subscribe</button>
            </div>
            <small class="text-light">We respect your privacy. Unsubscribe at any time.</small>
        </form>
    </div>
</section>

<!-- Trending Topics -->
<section class="container mb-5 trending-topics">
    <h2 class="mb-3">Trending Topics</h2>
    <div>
        {% for topic in trending_topics %}
        <a href="{{ url_for('topic', slug=topic.slug) }}" class="topic-tag">#{{ topic.name }}</a>
        {% endfor %}
    </div>
</section>
{% endblock %}